$("#channels").html("<%= escape_javascript(render("channels")) %>");

$("#channels div").each(function () {
	var url = $(this).data("url");
	var id = $(this).data("id");
	this.onclick = (function (url, id, name) {
		return function () {
			document.getElementById("stream_id").value = id;
			document.getElementById("stream_url").value = url;
			document.getElementById("stream_name").value = name.trim();
		}
	})(url, id, this.innerHTML);
});

function serialize (obj) {
	var str = "";
	for (var key in obj) {
	    if (str != "") {
	        str += "&";
	    }
	    str += key + "=" + obj[key];
	}
	return str;
}

function addHidden (formId, key, value) {
	var input = document.createElement("input");
	input.type = 'hidden';
	input.name = key;
	input.value = value;
	document.getElementById(formId).appendChild(input);
}